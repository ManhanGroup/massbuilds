<div class="development-panel-header">
  <h1>Create Development</h1>

  <div class="left-panel-links">
    {{#if (eq mode 'edit')}}
      {{#link-to 'map.developments.development.index' model.id}}
        <img src="/assets/images/chevrons-left.svg">
        Cancel
      {{/link-to}}
    {{/if}}

    {{#loading-spinner message=loadingSpinnerText isLoading=isLoading}}
      <button id="submitDevelopmentFormButton" onclick={{action update}} class='submit-changes styled' disabled={{not (and fulfilled changes)}}>
        {{submitText}}
      </button>
    {{/loading-spinner}}
  </div>
</div>
<form class="development-content">
  {{#overflow-scroll}}
    <div class="development-header">

      <div class="form-row required primary">
        <label for="development_name" class="hidden">Development Name</label>
        {{input
          id="development_name"
          value=editing.name
          class=(if inValid.name 'invalid')
          placeholder="Development Name"
          input=(action checkForUpdated 'name')
        }}
      </div>

      <div class="form-row required secondary location-fields">
        <img src="/assets/images/map-pin.svg">
        <label for="development_latitude" class="hidden">Latitude</label>
        {{input
          id="development_latitude"
          value=(to-fixed editing.latitude 6)
          class=(if inValid.latitude 'invalid')
          placeholder="Latitude"
          readonly="readonly"
        }}
        <label for="development_longitude" class="hidden">Longitude</label>
        {{input
          id="development_longitude"
          value=(to-fixed editing.longitude 6)
          class=(if inValid.longitude 'invalid')
          placeholder="Longitude"
          readonly="readonly"
        }}
        <p><em>Drag map to set location</em></p>
      </div>

      <div class="form-row secondary project-url">
        <img src="/assets/images/link.svg">
        {{input
          class=(if inValid.prjUrl 'invalid')
          value=editing.prjUrl
          placeholder="Project Website"
          input=(action checkForUpdated 'prjUrl')}}
      </div>

    </div>

    <div class="detail-group">
      <article>
        <h4>Meta Data</h4>
        <div class="row">
          <div class="column">
            <div class="field">
              <label>{{defined-term key='DEVELOPER'}}</label>
              {{input
                value=editing.devlper
                class=(if inValid.devlper 'invalid')
                placeholder="Enter Developer Name"
                input=(action checkForUpdated 'devlper')}}
            </div>
            {{#if model.user}}
              <div class="field">
                <label>Entry Created By</label>
                <span>
                  {{#if (eq model.user.fullName 'undefined undefined')}}
                    {{loading-spinner message="Loading Creator" isLoading=true}}
                  {{else}}
                    {{model.user.fullName}}
                  {{/if}}
                </span>
              </div>
            {{/if}}
            {{#if editing.updatedAt}}
              <div class="field">
                <label>Last Updated</label>
                <span>{{editing.updatedAt}}</span>
              </div>
            {{/if}}
            <div class="field long-form">
              <label class="required">
                {{defined-term key='DESCRIPTION'}}
              </label>
              <p>
                {{textarea
                  value=editing.descr
                  class=(if inValid.descr 'invalid required-field' 'required-field')
                  placeholder="Enter Description"
                  input=(action checkForUpdated 'descr')}}
              </p>
            </div>
            <div class="field long-form">
              <label>
                {{defined-term key='NOTES'}}
              </label>
              <p>
                {{textarea
                  value=editing.notes
                  placeholder="Enter Addtional Notes"
                  input=(action checkForUpdated 'notes')}}
              </p>
            </div>
            <div class="field">
              <label>{{defined-term key='PROJID'}}</label>
              {{input
                value=editing.projId
                class=(if inValid.projId 'invalid')
                placeholder="Enter Unique Project ID if there is one"
                input=(action checkForUpdated 'projId')}}
            </div>
            <div class="field">
              <label>{{defined-term key='TRAFFIC_COUNT_DATA'}}</label>
              {{input
                value=editing.trafficCountData
                class=(if inValid.trafficCountData 'invalid')
                placeholder="Enter URL for Traffic Count Data"
                input=(action checkForUpdated 'trafficCountData')}}
            </div>
          </div>
        </div>
      </article>
    </div>

    <div class="metric-groups">
      <article>
        <h4>Key Info</h4>
        <div class="row">
          <div class="column">
            <div class="field">
              {{#if (eq developmentAgency 'SLOCOG')}}  
                <label>Open to Public View?
                  {{input type="checkbox" checked=false disabled=true}}<div class="note">
                Developments in SLCOG region will only be visible to uers with an account.
                </div>
                </label>
              {{else}}
              <label>Open to Public View?
                {{input type="checkbox" checked=editing.ispublic click=(action checkForUpdated 'ispublic')}}
              </label>
              {{/if}}
            </div>
            <div class="field">
              <label for="status" class="required">
                {{defined-term key='STATUS'}}
              </label>
              <select
                id="status"
                class={{if inValid.status 'invalid'}}
                name="status"
                onchange={{action updateStatus}}
              >
                {{#unless editing.status}}
                  <option disabled selected>Select Status</option>
                {{/unless}}
                {{#each filters.status.options as |option|}}
                  <option value={{option}} selected={{if (eq option editing.status) 'selected'}}>{{capitalize option}}</option>
                {{/each}}
              </select>
            </div>
            <div class="field long-form">
              <label>
                {{defined-term key='STATUS_COMMENTS'}}
              </label>
              <p>
                {{textarea
                  value=editing.statComts
                  placeholder="Enter Status Comments"
                  input=(action checkForUpdated 'statComts')}}
              </p>
            </div>

          </div>
        </div>

        <div class="row">
          <div class="column">
            

            <div class="field">
              <label for="yearCompl" class="required">
                {{defined-term key='YEAR_COMPLETE'}}
              </label>
              {{input
                id="yearCompl"
                class=(if inValid.yearCompl 'invalid')
                value=editing.yearCompl class="required-field"
                placeholder="Enter here"
                input=(action checkForUpdated 'yearCompl')}}
            </div>

            <div class="field">
              <label>Complete Date Estimated?
                {{input type="checkbox" checked=editing.yrcompEst click=(action checkForUpdated 'yrcompEst')}}
              </label>
            </div>

            <div class="field">
              <label>Complete Date within the Current RHNA Cycle?
                {{input type="checkbox" checked=editing.rhna click=(action checkForUpdated 'rhna')}}
              </label>
            </div>

            {{#if (gt editing.yearCompl 2024) }}
            <div class="field">
              <label for="percomp25">
                {{defined-term key='percomp25'}}
              </label>
              {{input
                id="percomp25"
                class=(if inValid.percomp25 'invalid')
                value=editing.percomp25
                placeholder="Percent complete in 2024"
                input=(action checkForUpdated 'percomp25')}}
            </div>

            <div class="field">
              <label for="percomp30">
                {{defined-term key='percomp30'}}
              </label>
              {{input
                id="percomp30"
                class=(if inValid.percomp30 'invalid')
                value=editing.percomp30
                placeholder="Percent complete in 2028"
                input=(action checkForUpdated 'percomp30')}}
            </div>

            <div class="field">
              <label for="percomp35">
                {{defined-term key='PERCOMP35'}}
              </label>
              {{input
                id="percomp35"
                class=(if inValid.percomp35 'invalid')
                value=editing.percomp35
                placeholder="Percent complete in 2035"
                input=(action checkForUpdated 'percomp35')}}
            </div>

            <div class="field">
              <label for="percomp40">
                {{defined-term key='PERCOMP40'}}
              </label>
              {{input
                id="percomp40"
                class=(if inValid.percomp40 'invalid')
                value=editing.percomp40
                placeholder="Percent complete in 2040"
                input=(action checkForUpdated 'percomp40')}}
            </div>

            <div class="field">
              <label for="percomp45">
                {{defined-term key='PERCOMP45'}}
              </label>
              {{input
                id="percomp45"
                class=(if inValid.percomp45 'invalid')
                value=editing.percomp45
                placeholder="Percent complete in 2045"
                input=(action checkForUpdated 'percomp45')}}
            </div>
            {{/if}}

            {{#if (or (eq userAgency 'SLCOG') (eq developmentAgency 'SLCOG'))}}            
            <div class="field">
              <label for="gluc" class="required">
                {{defined-term key='GLUC'}}
              </label>
              <select
                  id="gluc"
                  class={{if inValid.gluc 'invalid'}}
                  name="gluc"
                  onchange={{action updateGluc}}
                >
                {{#unless editing.gluc}}
                  <option disabled selected>Select Gluc</option>
                {{/unless}}
                {{#each filters.gluc.options as |option|}}
                  <option value={{option}} selected={{if (eq option editing.gluc) 'selected'}}>{{capitalize option}}</option>
                {{/each}}
              </select>             
            </div>
            {{else}}
            <div class="field">
              <label for="placetype">
                {{defined-term key='PLACE_TYPE'}}
              </label>
              {{input
                id="placetype"
                value=editing.placetype
                class=(if inValid.placetype 'invalid')
                placeholder="Enter Place Type"
                input=(action checkForUpdated 'placetype')}}
            </div>
            {{/if}}

            <div class="field">
              <label>{{defined-term key="SBTYPE"}}</label>
              <ul class="multi-check-options">
                {{#each filters.sbType.options as |option|}}
                  <li>
                    {{input type="checkbox" class="field-sbType" name=option checked=(contains option selectedSbTypes) click=(action checkForUpdated 'sbType')}}
                    {{capitalize option}}
                  </li>
                {{/each}}
              </ul>
            </div>
            
          </div>

          <div class="column">
            <!--div class="field">
              <label for="onsitepark">
                {{defined-term key='PARKING_SPACES'}}
              </label>
              {{input
                class=(if inValid.onsitepark 'invalid')
                value=editing.onsitepark
                placeholder="Enter here"
                input=(action checkForUpdated 'onsitepark')}}
            </div-->

            <div class="field">
              <label for="totalCost">
                {{defined-term key='COST_OF_CONSTRUCTION'}}
              </label>
              ${{input
                id="totalCost"
                class=(if inValid.totalCost 'invalid')
                value=editing.totalCost
                placeholder="Enter here"
                input=(action checkForUpdated 'totalCost')}}
            </div>

            <div class="field">
              <label for="prjarea">
                {{defined-term key='PROJECT_AREA'}}
              </label>
              {{input
                id="prjarea"
                class=(if inValid.prjarea 'invalid')
                value=editing.prjarea placeholder="Enter here"
                input=(action checkForUpdated 'prjarea')}}
            </div>

            <div class="field">
              <label>Parking Type</label>
              <ul class="multi-check-options">
                {{#each filters.parkType.options as |option|}}
                  <li>
                    {{input type="checkbox" class="field-parkType" name=option checked=(contains option selectedParkTypes) click=(action checkForUpdated 'parkType')}}
                    {{capitalize option}}
                  </li>
                {{/each}}
              </ul>
            </div>

            {{#if (or (eq userAgency 'SRTA') (eq developmentAgency 'SRTA'))}} 
              <div class="field">
                <label>AB1317 Applicable?
                  {{input type="checkbox" checked=editing.ab1317 click=(action checkForUpdated 'ab1317')}}
                </label>
              </div>
            {{/if}}
            
          </div>
        </div>

        <p class="attributes">
          <label>Attributes:</label>

          <span>
            <label>
              {{defined-term key='REDEVELOPMENT'}}
              {{input type='checkbox' checked=editing.rdv click=(action checkForUpdated 'rdv')}}
            </label>
          </span>,

          <span>
            <label>
              {{defined-term key='PHASED'}}          
              {{input type='checkbox' checked=editing.phased click=(action checkForUpdated 'phased')}}
            </label>
          </span>,

          <span>
            <label>
              {{defined-term key='STALLED'}}
              {{input type='checkbox' checked=editing.stalled click=(action checkForUpdated 'stalled')}}
            </label>
          </span>,

          <span>
            <label>
              {{defined-term key='AS_OF_RIGHT'}}
              {{input type='checkbox' checked=editing.asofright click=(action checkForUpdated 'asofright')}}
            </label>
          </span>,

          <span>
            <label>
              {{defined-term key='MIXED_USE'}}
              {{input type='checkbox' checked=editing.mixedUse click=(action checkForUpdated 'mixedUse')}}
            </label>
          </span>


        </p>
        {{#if editing.mixedUse}}
         <div class="field long-form">
              <label>
                {{defined-term key='MIXED_USE_DESCR'}}
              </label>
              <p>
                {{textarea
                  value=editing.mixDescr
                  placeholder="Enter Description for Mixed Use"
                  input=(action checkForUpdated 'mixDescr')}}
              </p>
            </div>
        {{/if}}
      </article>


      

      {{#if developmentTypeEnabled}}
        <div class={{if developmentType 'decision-row' 'decision-row invalid'}}>
          <label>
            Development Type
          </label>
          <div class="options">
            {{#radio-button
              value="residential"
              groupValue=developmentType
              changed=(action handleDevTypeChange)
            }}
              <span>Residential</span>
            {{/radio-button}}
            {{#radio-button
              value="commercial"
              groupValue=developmentType
              changed=(action handleDevTypeChange)
            }}
              <span>Commercial</span>
            {{/radio-button}}
            {{#radio-button
              value="both"
              groupValue=developmentType
              changed=(action handleDevTypeChange)
            }}
              <span>Both Residential and Commercial</span>
            {{/radio-button}}
          </div>
        </div>
      {{/if}}

      {{#if (and developmentTypeEnabled (not developmentType))}}
        <div class="res-comm-placeholder">
          <span>Please select a development type to continue</span>
        </div>
      {{/if}}

      {{#if (or (not developmentTypeEnabled) (or (eq developmentType 'residential') (eq developmentType 'both')))}}     
       
        <article>
          <h4>Residential</h4>

          <div class="row">
            <div class="column">
              <div class="field">
                <label for="gqpop">
                  {{defined-term key='GROUP_QUARTERS_POPULATION'}}
                </label>
                {{input
                  id="gqpop"
                  class=(if inValid.gqpop 'invalid')
                  value=editing.gqpop
                  placeholder="Enter here"
                  input=(action checkForUpdated 'gqpop')}}
              </div>
            </div>
            <div class="column">
            </div>
          </div>

          <p class="attributes">
            <label>Attributes:</label>

            <span>
              <label>
                {{defined-term key='AGE_RESTRICTED'}}
                {{input type='checkbox' checked=editing.ovr55 click=(action checkForUpdated 'ovr55')}}
              </label>
            </span>
          </p>

          <div class="table-wrapper">
            <div class="table-heading">
              <h3 class="field">
                <label class="required">
                  {{defined-term key='HOUSING_UNITS'}}
                </label>
              </h3>
              <span>
                {{#if (and (not-eq editing.hu null) (gte editing.hu 0))}}
                  <em>{{editing.hu}} Unit{{unless (eq editing.hu 1) 's'}}</em>
                {{else}}
                  <em>Enter quantity of each unit type below</em>
                {{/if}}
              </span>
            </div>
            <table class="housing-units">
              <tr class="table-header">
                <td>Unit Type</td>
                <td>Quantity</td>
                <td>Percentage</td>
              </tr>

              <tr>
                <td>
                  <label>{{defined-term key="SINGLE_FAMILY"}}</label>
                </td>
                <td>
                  {{input
                    class=(if inValid.singfamhu 'invalid')
                    value=editing.singfamhu
                    placeholder='-'
                    input=(action updateHu 'singfamhu')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.singfamhu editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>{{defined-term key="MULTI_FAMILY"}}</label>
                </td>
                <td>
                  {{input
                    class=(if inValid.multifam 'invalid')
                    value=editing.multifam
                    placeholder='-'
                    input=(action updateHu 'multifam')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.multifam editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              {{#if (or (eq userAgency 'SRTA') (eq developmentAgency 'SRTA'))}} 
                <tr>
                  <td>
                    <label>{{defined-term key="MULTI_FAMILY_2TO4"}}</label>
                  </td>
                  <td>
                    {{input
                      class=(if inValid.mf24 'invalid')
                      value=editing.mf24
                      placeholder='-'
                      input=(action updateMultifam 'mf24')}}
                  </td>
                  <td>
                    {{#if (gt editing.hu 0)}}
                      {{round (mult 100 (div editing.mf24 editing.hu))}}%
                    {{else}}
                      0%
                    {{/if}}
                  </td>
                </tr>

                <tr>
                  <td>
                    <label>{{defined-term key="MULTI_FAMILY_5UP"}}</label>
                  </td>
                  <td>
                    {{input
                      class=(if inValid.mf5up 'invalid')
                      value=editing.mf5up
                      placeholder='-'
                      input=(action updateMultifam 'mf5up')}}
                  </td>
                  <td>
                    {{#if (gt editing.hu 0)}}
                      {{round (mult 100 (div editing.mf5up editing.hu))}}%
                    {{else}}
                      0%
                    {{/if}}
                  </td>
                </tr>
              {{/if}}

              <tr>
                <td>
                  <label>
                    {{defined-term key="MOBILE"}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.mobile 'invalid')
                    value=editing.mobile
                    placeholder='-'
                    input=(action updateHu 'mobile')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.mobile editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key="UNKNOWN_HOUSING_UNITS"}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.unknownhu 'invalid')
                    value=editing.unknownhu
                    placeholder='-'
                    input=(action updateHu 'unknownhu')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.unknownhu editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>
            </table>
            <table class="housing-units">
              <tr class="table-header">
                <td>Unit Style</td>
                <td>Quantity</td>
                <td>Percentage</td>
              </tr>
              <tr>
                <td><label>Studio/1 Bedroom</label></td>
                <td>
                  {{input
                    class=(if inValid.units1bd 'invalid')
                    value=editing.units1bd
                    placeholder='-'
                    input=(action updateHu 'units1bd')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.units1bd editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td><label>2 Bedroom</label></td>
                <td>
                  {{input
                    class=(if inValid.units2bd 'invalid')
                    value=editing.units2bd
                    placeholder='-'
                    input=(action updateHu 'units2bd')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.units2bd editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td><label>3 Bedroom</label></td>
                <td>
                  {{input
                    class=(if inValid.units3bd 'invalid')
                    value=editing.units3bd
                    placeholder='-'
                    input=(action updateHu 'units3bd')}}
                </td>
                <td>
                  {{#if (gt editing.hu 0)}}
                    {{round (mult 100 (div editing.units3bd editing.hu))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>
            </table>
          </div>

          <div class="table-wrapper">
            <div class="table-heading">
              <h3 class="field">
                <label>
                  {{defined-term key='AFFORDABLE_UNITS'}}
                </label>
              </h3>
              <span>
                {{#if (and (not-eq editing.affrdUnit null) (gte editing.affrdUnit 0))}}
                  <em>{{editing.affrdUnit}} Unit{{unless (eq editing.affrdUnit 1) 's'}}</em>
                {{else}}
                  <em>Enter quantity of each unit type below</em>
                {{/if}}
              </span>
            </div>

            <table class="affordable-units">
              <tr class="table-header">
                <td>Unit Type</td>
                <td>Quantity</td>
                <td>Percentage</td>
              </tr>

              <tr>
                <td><label>Units &lt;50% AMI</label></td>
                <td>
                  {{input
                    class=(if inValid.affU50 'invalid')
                    value=editing.affU50
                    placeholder='-'
                    input=(action updateAffrdUnit 'affU50')}}
                </td>
                <td>
                  {{#if (gt editing.affrdUnit 0)}}
                    {{round (mult 100 (div editing.affU50 editing.affrdUnit))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td><label>Units 50-80% AMI</label></td>
                <td>
                  {{input
                    class=(if inValid.aff5080 'invalid')
                    value=editing.aff5080
                    placeholder='-'
                    input=(action updateAffrdUnit 'aff5080')}}
                </td>
                <td>
                  {{#if (gt editing.affrdUnit 0)}}
                    {{round (mult 100 (div editing.aff5080 editing.affrdUnit))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td><label>Units 80-120% AMI</label></td>
                <td>
                  {{input
                    class=(if inValid.aff80120 'invalid')
                    value=editing.aff80120
                    placeholder='-'
                    input=(action updateAffrdUnit 'aff80120')}}
                </td>
                <td>
                  {{#if (gt editing.affrdUnit 0)}}
                    {{round (mult 100 (div editing.aff80120 editing.affrdUnit))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td><label>Above Units 120% AMI</label></td>
                <td>
                  {{input
                    class=(if inValid.aff120p 'invalid')
                    value=editing.aff120p
                    placeholder='-'
                    input=(action updateAffrdUnit 'aff120p')}}
                </td>
                <td>
                  {{#if (gt editing.affrdUnit 0)}}
                    {{round (mult 100 (div editing.aff120p editing.affrdUnit))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>Unknown</td>
                <td>
                  {{input
                    class=(if inValid.affUnknown 'invalid')
                    value=editing.affUnknown
                    placeholder='-'
                    input=(action updateAffrdUnit 'affUnknown')}}
                </td>
                <td>
                  {{#if (gt editing.affrdUnit 0)}}
                    {{round (mult 100 (div editing.affUnknown editing.affrdUnit))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>
            </table>          
          </div>          
        </article>
      {{/if}}

      {{#if (or (not developmentTypeEnabled) (or (eq developmentType 'commercial') (eq developmentType 'both')))}}
        <article>
          <h4>Commercial</h4>

          <div class="row">
            <div class="column">
              <div class="field">
                <label for="publicsqft">
                  {{defined-term key='PUBLIC_AREA'}}
                </label>
                {{input
                  id="publicsqft"
                  class=(if inValid.publicsqft 'invalid')
                  value=editing.publicsqft
                  placeholder="Enter here"
                  input=(action checkForUpdated 'publicsqft')}}
              </div>
            </div>           
           
            <div class="column">
              <div class="field">
                <label for="hotelrms">
                  {{defined-term key='HOTEL_ROOMS'}}
                </label>
                {{input
                  id="hotelrms"
                  class=(if inValid.hotelrms 'invalid')
                  value=editing.hotelrms
                  placeholder="Enter here"
                  input=(action checkForUpdated 'hotelrms')}}
              </div>
            </div>
          </div>
      

          <p class="attributes">
            <label>Attributes:</label>

            <span>
              <label>
                {{defined-term key='COMPANY_HEADQUARTERS'}}              
                {{input type='checkbox' checked=editing.headqtrs click=(action checkForUpdated 'headqtrs')}}
              </label>
            </span>
          </p>       
              

          <div class="table-wrapper">
            <div class="table-heading">
              <h3 class="field">
                <label class="required">
                  {{defined-term key='COMMERCIAL_AREA'}}
                </label>
              </h3>
              <span>
                {{#if (and (not-eq editing.commsf null) (gte editing.commsf 0))}}
                  <em>{{editing.commsf}} sqft.</em>
                {{else}}
                  <em>Enter the floor area for each use type below</em>
                {{/if}}
              </span>
            </div>
          
            <table class="commercial-makeup">
              <tr class="table-header">
                <td>Use Type</td>
                <td>Floor Area (sqft.)</td>
                <td>Percentage</td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='RETAIL_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.retSqft 'invalid')
                    value=editing.retSqft
                    placeholder='-'
                    input=(action updateCommsf 'retSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.retSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='OFFICE_MEDICAL_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.ofcmdSqft 'invalid')
                    value=editing.ofcmdSqft
                    placeholder='-'
                    input=(action updateCommsf 'ofcmdSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.ofcmdSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='INDUSTRIAL_MANUFACTURING_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.indmfSqft 'invalid')
                    value=editing.indmfSqft
                    placeholder='-'
                    input=(action updateCommsf 'indmfSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.indmfSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='WAREHOUSE_SHIPPING_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.whsSqft 'invalid')
                    value=editing.whsSqft
                    placeholder='-'
                    input=(action updateCommsf 'whsSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.whsSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='RESEARCH_DEVELOPMENT_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.rndSqft 'invalid')
                    value=editing.rndSqft
                    placeholder='-'
                    input=(action updateCommsf 'rndSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.rndSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='EDUCATIONAL_INSTITUTIONAL_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.eiSqft 'invalid')
                    value=editing.eiSqft placeholder='-'
                    input=(action updateCommsf 'eiSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.eiSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='HOTEL_ROOM_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.hotelSqft 'invalid')
                    value=editing.hotelSqft placeholder='-'
                    input=(action updateCommsf 'hotelSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.hotelSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='OTHER_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.otherSqft 'invalid')
                    value=editing.otherSqft
                    placeholder='-'
                    input=(action updateCommsf 'otherSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.otherSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='UNKNOWN_AREA'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.unkSqft 'invalid')
                    value=editing.unkSqft
                    placeholder='-'
                    input=(action updateCommsf 'unkSqft')}}
                </td>
                <td>
                  {{#if (gt editing.commsf 0)}}
                    {{round (mult 100 (div editing.unkSqft editing.commsf))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>
            </table>          
          </div>

         
          <div class="table-wrapper">
            <div class="table-heading">
              <h3 class="field">
                <label class="required">
                  {{defined-term key='REPORTED_EMPLOYMENT'}}
                </label>
              </h3>
              <span>
                {{#if (and (not-eq editing.rptdemp null) (gte editing.rptdemp 0))}}
                  <em>{{editing.rptdemp}}</em>
                {{else}}
                  <em>Enter the number of employment for each use type below</em>
                {{/if}}
              </span>
            </div>

            <table class="commercial-makeup emp">
              <tr class="table-header">
                <td>Use Type</td>
                <td># of Employment</td>
                <td>Percentage</td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='EDUCATION_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empedu 'invalid')
                    value=editing.empedu
                    placeholder='-'
                    input=(action updateRptdEmp 'empedu')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empedu editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='FOOD_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empedu 'invalid')
                    value=editing.empfoo
                    placeholder='-'
                    input=(action updateRptdEmp 'empfoo')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empfoo editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>
              
              <tr>
                <td>
                  <label>
                    {{defined-term key='GOVERNMENT_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empedu 'invalid')
                    value=editing.empgov
                    placeholder='-'
                    input=(action updateRptdEmp 'empgov')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empgov editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='INDUSTRY_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empind 'invalid')
                    value=editing.empind
                    placeholder='-'
                    input=(action updateRptdEmp 'empind')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empind editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='MEDICAL_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empmed 'invalid')
                    value=editing.empmed
                    placeholder='-'
                    input=(action updateRptdEmp 'empmed')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empmed editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='OFFICE_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empofc 'invalid')
                    value=editing.empofc
                    placeholder='-'
                    input=(action updateRptdEmp 'empofc')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empofc editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='OTHER_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empoth 'invalid')
                    value=editing.empoth
                    placeholder='-'
                    input=(action updateRptdEmp 'empoth')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empoth editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='RETAIL_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empret 'invalid')
                    value=editing.empret
                    placeholder='-'
                    input=(action updateRptdEmp 'empret')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empret editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>

              <tr>
                <td>
                  <label>
                    {{defined-term key='SERVICE_EMPLOYMENT'}}
                  </label>
                </td>
                <td>
                  {{input
                    class=(if inValid.empsvc 'invalid')
                    value=editing.empsvc
                    placeholder='-'
                    input=(action updateRptdEmp 'empsvc')}}
                </td>
                <td>
                  {{#if (gt editing.rptdemp 0)}}
                    {{round (mult 100 (div editing.empsvc editing.rptdemp))}}%
                  {{else}}
                    0%
                  {{/if}}
                </td>
              </tr>           
            </table>
          </div>
        

        </article>
      {{/if}}

      {{#if (or (eq userAgency 'SRTA') (eq developmentAgency 'SRTA')) }} 
        <div class="field">
          <label for="school">New School?</label>
          {{input type="checkbox" checked=editing.school click=(action checkForUpdated 'school')}}
        </div>
      {{/if}}

      
       {{#if editing.school}}      
        <article>
          <h4>School</h4>        
          <div class="row">
            <div class="column">
              <div class="field">
                <label for="studk12p">
                  {{defined-term key='STUDENT_ENROLLMENT_KTOHIGH'}}
                </label>
                {{input
                  id="studk12p"
                  class=(if inValid.studk12p 'invalid')
                  value=editing.studk12p
                  placeholder="Enter here"
                  input=(action checkForUpdated 'studk12p')}}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="column">
              <div class="field">
                <label for="studunip">
                  {{defined-term key='STUDENT_ENROLLMENT_UNIVERSITY'}}
                </label>
                {{input
                  id="studuniq"
                  class=(if inValid.studunip 'invalid')
                  value=editing.studunip
                  placeholder="Enter here"
                  input=(action checkForUpdated 'studunip')}}
              </div>
            </div>
          </div>
        </article>
      {{/if}}
    </div>
  {{/overflow-scroll}}
  <div class="required-note">
    * = required field
  </div>
</form>
